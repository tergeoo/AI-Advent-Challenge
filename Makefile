.PHONY: help day1 day2 build clean test tidy install

help: ## –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É
	@echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | awk 'BEGIN {FS = ":.*?## "}; {printf "  \033[36m%-15s\033[0m %s\n", $$1, $$2}'

day1: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å Day 1
	@echo "üöÄ –ó–∞–ø—É—Å–∫ Day 1..."
	@go run cmd/advent/day1/main.go

day2: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å Day 2
	@echo "üöÄ –ó–∞–ø—É—Å–∫ Day 2..."
	set -a && source .env && set +a && go run cmd/advent/day2/main.go

build: ## –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
	@echo "üî® –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤..."
	@mkdir -p bin
	@go build -o bin/day1 cmd/advent/day1/main.go
	@go build -o bin/day2 cmd/advent/day2/main.go
	@echo "‚úÖ –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ —Å–æ–±—Ä–∞–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ bin/"

clean: ## –£–¥–∞–ª–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
	@echo "üßπ –û—á–∏—Å—Ç–∫–∞..."
	@rm -rf bin/
	@echo "‚úÖ –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

test: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
	@echo "üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤..."
	@go test -v ./...

tidy: ## –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
	@echo "üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
	@go mod tidy
	@echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"

install: ## –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
	@echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
	@go mod download
	@echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
